<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/img/favicon.png" type="image/png" />
    <title>Quick sip</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/vendors/linericon/style.css" />
    <link rel="stylesheet" href="/css/themify-icons.css" />
    <link rel="stylesheet" href="/css/flaticon.css" />
    <link rel="stylesheet" href="/vendors/owl-carousel/owl.carousel.min.css" />
    <link rel="stylesheet" href="/vendors/lightbox/simpleLightbox.css" />
    <link rel="stylesheet" href="/vendors/nice-select/css/nice-select.css" />
    <link rel="stylesheet" href="/vendors/animate-css/animate.css" />
    <link rel="stylesheet" href="/vendors/jquery-ui/jquery-ui.css" />
    <!-- main css -->
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/responsive.css" />

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
    <!-- Font Awesome (for caret icon) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>


    <style>
      .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 1000;
        float: left;
        min-width: 10rem;
        padding: 0.5rem 0;
        margin: 0.125rem 0 0;
        font-size: 1rem;
        color: #212529;
        text-align: left;
        background-color: #fff;
        border: 1px solid rgba(0, 0, 0, 0.15);
        border-radius: 0.25rem;
        display: none; 
      }

      .dropdown-menu.show {
        display: block; 
      }

      .dropdown-toggle::after {
        content: "\f0d7"; 
        font-family: "FontAwesome";
      }


    .new_product_area {
        padding: 80px 0;
    }

    .single-product {
        border: 1px solid #eee;
        border-radius: 8px;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
        display: flex;
        flex-direction: column;
        margin-bottom: 25px;
    }

    .single-product:hover {
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transform: translateY(-5px);
    }

    .product-img {
        position: relative;
    }

    .p_icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        opacity: 0;
        transition: all 0.3s ease;
        display: flex;
        gap: 15px;
    }

    .single-product:hover .p_icon {
        opacity: 1;
    }

    .p_icon a {
        width: 40px;
        height: 40px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #333;
        transition: all 0.3s ease;
    }

    .p_icon a:hover {
        background: #000;
        color: white;
    }

    .product-btm {
        padding: 15px;
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .product-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 8px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        min-height: 3em;
    }

    .current-price {
        font-weight: 700;
        color: #000;
    }

    .original-price {
        color: #999;
        font-size: 14px;
    }

    .object-fit-cover {
        object-fit: cover;
    }

    .cart-icon {
      position: relative;
      display: inline-block;
  }

  .cart-count {
      position: absolute;
      top: 24px;
      right: -8px;
      background: #ff0000;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 10px;
      min-width: 18px;
      height: 18px;
      text-align: center;
      line-height: 14px;
      font-weight: bold;     
      z-index: 1000;
  }

  .navbar-nav .nav-item .icons {
      position: relative;
      padding: 8px;
  }

    </style>
  </head>

  <body>
    <!--================Header Menu Area =================-->
    <header class="header_area">
      <div class="top_menu">
        <div class="container">
          <div class="row">
            <div class="col-lg-7">
              
            </div>
            <div class="col-lg-5">
    
            </div>
          </div>
        </div>
      </div>
      <div class="main_menu">
        <div class="container">
          <nav class="navbar navbar-expand-lg navbar-light w-100">
            
             <div class="logo">
            <a class="navbar-brand logo_h" href="index.html">
              <img src="/img/logo.png" alt="Logo" style="max-height: 95px" />
            </a>
          </div>
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
           
            <div class="collapse navbar-collapse offset w-100" id="navbarSupportedContent">
              <div class="row w-100 mr-0">
                <div class="col-lg-7 pr-0">
                  <ul class="nav navbar-nav center_nav pull-right" style="display: flex;justify-content: end;margin-right: 69px;">
                    <li class="nav-item active">
                      <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item submenu dropdown">

                      <a
                        href="/shop"
                        class="nav-link">
                        Shop
                      </a>

                    </li>
                  </ul>
                </div>

                <div class="col-lg-5 pr-0">
                  <ul
                    class="nav navbar-nav navbar-right right_nav pull-right align-items-center" style="display: flex;justify-content: end;margin-left: 20px;"
                  >
                    <% if (user) { %>
                    <li class="nav-item dropdown">
                      <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        id="userDropdown"
                        role="button"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <%= user.name %> <i class="fa fa-caret-down ml-1"></i>
                      </a>
                      <div class="dropdown-menu" aria-labelledby="userDropdown">
                        <a class="dropdown-item" href="/userProfile">Profile</a>
                        <a class="dropdown-item" href="/logout">Logout</a>
                      </div>
                    </li>
                    <% } else { %>
                    
                    <li class="nav-item">
                      <a
                        href="/signup"
                        class="btn btn-outline-primary btn-sm mx-1"
                        >Sign Up</a
                      >
                    </li>
                    <li class="nav-item">
                      <a
                        href="/login"
                        class="btn btn-outline-success btn-sm mx-1"
                        >Login</a
                      >
                    </li>
                    <% } %>

                    <li class="nav-item">
                      <a href="/cart" class="icons cart-icon">
                        <i class="ti-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">
                        <%= typeof cartCount !== 'undefined' ? cartCount : 0 %>
                      </span>
                      </a>
                    </li>
                                  
                    <li class="nav-item">
                      <a href="/wishlist" class="icons">
                        <i class="ti-heart" aria-hidden="true"></i>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </header>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>

    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded - initializing cart manager');
    
      document.querySelectorAll(".dropdown-toggle").forEach(function(dropdown) {
        dropdown.addEventListener("click", function(e) {
          e.preventDefault();
          var menu = this.nextElementSibling;
          menu.classList.toggle("show");
        });
      });

      document.addEventListener('click', function(e) {
        if (!e.target.matches('.dropdown-toggle')) {
          document.querySelectorAll('.dropdown-menu').forEach(function(menu) {
            menu.classList.remove('show');
          });
        }
      });
    });

    function updateCartCount(count) {
    const cartCountElement = document.getElementById('cartCount');
    if (cartCountElement) {
        cartCountElement.textContent = count;
        cartCountElement.style.display = count > 0 ? 'block' : 'none';
    }
}

document.addEventListener('cartUpdated', function(e) {
    updateCartCount(e.detail.count);
});

    </script>
  </body>
</html>
